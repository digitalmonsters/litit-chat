(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48425,(e,t,r)=>{t.exports=e.r(47886)},82988,e=>{"use strict";var t=e.i(458),r=e.i(79846);function a({variant:e="primary",size:a="md",isLoading:i=!1,className:o,disabled:s,children:n,...l}){return(0,t.jsxs)("button",{className:(0,r.cn)("inline-flex items-center justify-center rounded-lg font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",{primary:"bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600",secondary:"bg-purple-600 text-white hover:bg-purple-700 focus:ring-purple-500 dark:bg-purple-500 dark:hover:bg-purple-600",outline:"border border-zinc-300 bg-transparent text-zinc-700 hover:bg-zinc-50 focus:ring-zinc-500 dark:border-zinc-700 dark:text-zinc-300 dark:hover:bg-zinc-800",ghost:"bg-transparent text-zinc-700 hover:bg-zinc-100 focus:ring-zinc-500 dark:text-zinc-300 dark:hover:bg-zinc-800",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 dark:bg-red-500 dark:hover:bg-red-600"}[e],{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[a],o),disabled:s||i,...l,children:[i&&(0,t.jsxs)("svg",{className:"mr-2 h-4 w-4 animate-spin",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),n]})}e.s(["default",()=>a])},88994,e=>{"use strict";var t=e.i(458),r=e.i(74699),a=e.i(91392),i=e.i(26493),o=e.i(48425);e.i(93081);var s=e.i(79888),n=e.i(84979),l=e.i(42329),d=e.i(82988),c=e.i(883),u=e.i(79846);let m=["Technology","Design","Business","Music","Sports","Travel","Food","Art","Gaming","Photography","Fitness","Reading","Movies","Fashion","Cooking"];function g({className:e}){let{user:g,refreshUser:x}=(0,i.useAuth)(),h=(0,o.useRouter)(),[p,b]=(0,a.useState)(""),[f,y]=(0,a.useState)(""),[v,j]=(0,a.useState)(null),[w,N]=(0,a.useState)([]),[F,k]=(0,a.useState)(null),[E,A]=(0,a.useState)(null),[C,L]=(0,a.useState)(!1),[z,S]=(0,a.useState)(null),[R,T]=(0,a.useState)(!1),U=(0,a.useRef)(null),[P,M]=(0,a.useState)(null);(0,a.useEffect)(()=>{g&&(b(g.displayName||""),A(g.photoURL||null))},[g]);let B=async e=>{let t=e.target.files?.[0];if(!t)return;if(!t.type.startsWith("image/"))return void S("Please select an image file");k(t);let r=new FileReader;r.onloadend=()=>{A(r.result)},r.readAsDataURL(t)},I=async e=>{if(e.preventDefault(),!g)return void S("You must be logged in to complete profile setup");if(!p.trim())return void S("Please enter your name");L(!0),S(null);try{let e=(0,n.getFirestoreInstance)(),t=(0,s.doc)(e,n.COLLECTIONS.USERS,g.uid),r=g.photoURL||null;if(F){let e=await (0,l.compressImage)(F,800,.8);r=await (0,l.uploadAvatar)(g.uid,e)}await (0,s.updateDoc)(t,{displayName:p.trim(),bio:f.trim()||void 0,location:v||void 0,interests:w.length>0?w:void 0,photoURL:r||void 0,verified:!0,updatedAt:(0,s.serverTimestamp)()}),await x();try{await fetch("/api/users/sync",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:g.uid})})}catch(e){console.warn("Failed to sync user to GHL:",e)}h.push("/discover")}catch(e){console.error("Profile setup error:",e),S(e instanceof Error?e.message:"Failed to save profile")}finally{L(!1)}};return(0,t.jsx)(r.motion.div,{initial:"hidden",animate:"visible",variants:c.flameSlideUp,className:(0,u.cn)("w-full max-w-2xl mx-auto",e),children:(0,t.jsxs)("div",{className:"bg-[#1E1E1E] rounded-2xl p-8 border border-[#FF5E3A]/20 shadow-2xl",children:[(0,t.jsxs)(r.motion.div,{variants:c.flameFadeIn,className:"text-center mb-8",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-[#FF5E3A] to-[#FF9E57] bg-clip-text text-transparent mb-2",children:"Complete Your Profile"}),(0,t.jsx)("p",{className:"text-gray-400",children:"Tell us a bit about yourself"})]}),z&&(0,t.jsx)(r.motion.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-lg text-red-400 text-sm",children:z}),(0,t.jsxs)("form",{onSubmit:I,className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col items-center",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden border-2 border-[#FF5E3A] bg-gray-800 flex items-center justify-center",children:E?(0,t.jsx)("img",{src:E,alt:"Avatar preview",className:"w-full h-full object-cover"}):(0,t.jsx)("svg",{className:"w-12 h-12 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(0,t.jsx)("button",{type:"button",onClick:()=>U.current?.click(),className:"absolute bottom-0 right-0 w-8 h-8 bg-[#FF5E3A] rounded-full flex items-center justify-center hover:bg-[#FF6E4A] transition-colors",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),(0,t.jsx)("input",{ref:U,type:"file",accept:"image/*",onChange:B,className:"hidden"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"Upload a profile picture"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name *"}),(0,t.jsx)("input",{type:"text",value:p,onChange:e=>b(e.target.value),placeholder:"Your name",className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-[#FF5E3A] transition-colors",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Bio"}),(0,t.jsx)("textarea",{value:f,onChange:e=>y(e.target.value),placeholder:"Tell us about yourself...",rows:4,maxLength:200,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-[#FF5E3A] transition-colors resize-none"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[f.length,"/200"]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Location"}),v?(0,t.jsxs)("div",{className:"p-3 bg-gray-800 rounded-lg border border-gray-700",children:[(0,t.jsx)("p",{className:"text-white text-sm",children:v.address||`${v.city||"Unknown"}, ${v.country||"Unknown"}`}),(0,t.jsx)("button",{type:"button",onClick:()=>j(null),className:"text-xs text-[#FF5E3A] hover:text-[#FF6E4A] mt-1",children:"Change location"})]}):(0,t.jsx)(d.default,{type:"button",onClick:()=>{navigator.geolocation?(T(!0),M(null),navigator.geolocation.getCurrentPosition(async e=>{let t,r,a,{latitude:i,longitude:o}=e.coords;try{let e=await fetch(`https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${i}&longitude=${o}&localityLanguage=en`),s=await e.json();t=s.city||s.locality,r=s.countryName,a=s.formatted||`${t}, ${r}`}catch(e){console.warn("Reverse geocoding failed:",e)}j({latitude:i,longitude:o,city:t,country:r,address:a}),T(!1)},e=>{M(e.message),T(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})):M("Geolocation is not supported by your browser")},disabled:R,className:"w-full bg-gray-800 text-white hover:bg-gray-700",children:R?(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mx-auto"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"w-5 h-5 inline mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Get My Location"]})}),P&&(0,t.jsx)("p",{className:"text-xs text-red-400 mt-1",children:P})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-3",children:"Interests (select any that apply)"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-2",children:m.map(e=>(0,t.jsx)("button",{type:"button",onClick:()=>{N(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},className:(0,u.cn)("px-4 py-2 rounded-full text-sm font-medium transition-all",w.includes(e)?"bg-gradient-to-r from-[#FF5E3A] to-[#FF9E57] text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700 border border-gray-700"),children:e},e))})]}),(0,t.jsx)(d.default,{type:"submit",disabled:C||!p.trim(),className:"w-full bg-gradient-to-r from-[#FF5E3A] to-[#FF9E57] text-white hover:from-[#FF6E4A] hover:to-[#FFAE67] disabled:opacity-50 disabled:cursor-not-allowed",children:C?(0,t.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mx-auto"}):"Complete Profile"})]})]})})}function x(){return(0,t.jsx)("div",{className:"min-h-screen bg-[#1E1E1E] flex items-center justify-center p-4 py-12",children:(0,t.jsx)(r.motion.div,{initial:"hidden",animate:"visible",variants:c.flameFadeIn,className:"w-full max-w-2xl",children:(0,t.jsx)(g,{})})})}e.s(["default",()=>x],88994)}]);